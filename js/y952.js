/* script.js - 全文 */
/* 機能
   - 「今日の料理が上達する方法」ボタンでランダム文章を生成して表示
   - 文章コピーボタンで枠内テキストをクリップボードにコピー
   - PNG画像で保存ボタンで枠内を画像化してダウンロード
   - 各種シェアボタン（X, Facebook, LINE, Email）
   - 検索はページ内テキストをハイライトする簡易実装
*/

document.addEventListener('DOMContentLoaded', function () {
const tips = [
  "味見を繰り返して甘さ塩味酸味のバランスを整えることが上達の基本です。",
  "包丁の持ち方と切り方を練習することで調理時間が短縮され仕上がりが安定します。",
  "火加減を覚えること。強火中火弱火を使い分けると食感と風味が変わります。",
  "下ごしらえを丁寧に。食材の切り方や塩揉み・水切りで仕上がりが大きく変わります。",
  "調味料は最後に微調整。少しずつ足して味を見ながら調整すると失敗が減ります。",
  "レシピを理解して応用する。分量だけでなく工程の目的を知ると応用力がつきます。",
  "焦げやすい料理はタイマーや温度計を利用して一定の加熱を保つと失敗が減ります。",
  "一度に多くのことをしないで作業順を整理する。段取りが良いと失敗が減ります。",
  "香り付けや仕上げのハーブや柑橘を使うと料理の印象が格段に良くなります。",
  "同じ料理を何度も作って自分の味を作る。記録して改良点をメモすることがコツです。",
  "調味料の質を上げる。良いオリーブオイルや塩を使うだけで味が変わります。",
  "調理器具の手入れと選び方。良いフライパンや鍋は均一に熱が入りやすいです。",
  "温度管理を意識する。肉や魚は常温に戻してから火を入れると火の通りが安定します。",
  "塩のタイミングを工夫する。早く入れると余分な水分が出る場合があります。",
  "調理の基本原理を学ぶ。乳化や着火・ブイヨンの作り方などを理解すると応用できる。",
  "計量は最初は正確に。計量カップやスプーンで測る習慣が再現性を高めます。",
  "味のベースを作る時間を確保する。出汁やソースは時間をかけるほど深みが出ます。",
  "食材の旬を意識する。旬の食材は香りや甘みが強く扱いやすいです。",
  "冷蔵庫の整理をこまめに。見やすい収納は無駄を減らし調理効率を上げます。",
  "調理の前に作業スペースを整える。必要な器具・調味料を先に揃えると慌てないです。",
  "フライパンや鍋を予熱する習慣をつける。素材が均一に焼けるようになります。",
  "油は加熱してから材料を入れると表面がカリッと仕上がりやすいです。",
  "肉は焼く前に余分な水分を拭き取ると焼き色が良くなり旨味が閉じます。",
  "パンや煮物は休ませる時間を設けると味が落ち着きます。",
  "酸味は料理を締める。レモンや酢を最後に使って味を引き締めましょう。",
  "焦げそうな時は一旦火を弱めて、落ち着いて対処する癖をつけると失敗が減ります。",
  "味見は小さなスプーンで。冷める前のほんの一口で調整点がわかります。",
  "薄味でも素材の良さが生きる。塩分を過剰にしない習慣をつけると健康にも良いです。",
  "下味をつける段階を明確に。酢や塩を先に入れるか最後に入れるかで仕上がりが変わります。",
  "料理の目的を考える（早く作る、見栄えを良くする、保存する）と工程が決めやすいです。",
  "調理温度を一定に保つために火力の調整を小刻みにする練習をする。",
  "香りの強い材料は使う量を少しずつ増やす。香りは少量でも十分効きます。",
  "盛り付けは高さを意識すると見栄えが良くなる。",
  "食材を無駄にしないで余り物を活用するレシピを考える習慣を持つ。",
  "シンプルな調味（塩・胡椒・油）で素材の良さを引き出す練習をする。",
  "味を記録するノートを作る。分量や火加減、改善点を書き留めると上達が早いです。",
  "火を入れすぎないようにタイミングをメモして再現性を高める。",
  "冷凍と解凍の基本を覚える。冷凍保存のコツで食材ロスを減らせます。",
  "調理中は一度に複数の音を確認する（鍋の沸騰、炒め音）と状態判断が速くなります。",
  "塩は種類で味が変わる。岩塩や海塩などを使い分けて風味を楽しむ。",
  "だしは温度管理が大事。沸騰させすぎないことで雑味を抑えられます。",
  "保存容器は冷ます前に蓋をしない。蒸気で水滴がつくのを防ぐ工夫をする。",
  "新しいレシピは最初はレシピ通りに作り、その後で自分版にアレンジする。",
  "調理中は清潔を保つ。手や調理台を小まめに拭くことで衛生と作業効率が上がる。",
  "スパイスを使う時は少量から。焦らず味を見ながら足すと失敗が少ないです。",
  "焼き色は香ばしさと旨味を生むので見逃さないように火力を調整する。",
  "ソースは濃度調整を最後に。煮詰めすぎないように段階を管理する。",
  "酸味と甘味のバランスを意識して、どちらかを強く感じたら逆の要素で調整する。",
  "揚げ物は油の温度を一定に。温度計を使うと安定します。",
  "冷ましたい料理は広げて冷ますと衛生的で味落ちが少ないです。",
  "野菜は切る直前に洗うと鮮度が保たれます。",
  "味付けの基本は塩→酸味→辛味→甘味の順で調整してみる。",
  "にんにくや生姜は火入れのタイミングで香りが変わるので入れる順を工夫する。",
  "だしを取った後の残りを活用して別の料理に使うことで無駄が減ります。",
  "煮込みは最初に強火で温めてから弱火でじっくり煮ると透明感が出ることが多いです。",
  "卵料理は温度管理が命。低温でゆっくり加熱するとなめらかに仕上がる。",
  "炒め物は材料を順番に入れることで一体感のある仕上がりになります。",
  "調理器具を素材ごとに使い分ける（木製、ステンレス、テフロン）と手入れが楽になります。",
  "下ごしらえの時短テクニックをメモしておくと次回から同じ時間で確実にできるようになります。",
  "味見で足りない要素を一度に足さず、少しずつ調整する癖をつけましょう。",
  "料理中に余った味見用のソースはすぐに冷蔵庫へ。雑菌対策が大切です。",
  "火を止めた直後でも余熱で火が通るのでタイミングを見極める訓練をする。",
  "ハーブは最後に加えると香りが生きる。加熱時間で香りの飛び方が違うことを覚える。",
  "砂糖は隠し味として使うと酸味や塩味をまろやかにします。",
  "冷製料理は味が入りにくいので下味をしっかりつけてから冷やすと良い。",
  "魚は骨の処理を丁寧に。小骨を取り除くと食感が良くなります。",
  "蒸し料理は蒸気を逃がさない工夫が大切。鍋の蓋や蒸し器の密閉をチェックする。",
  "煮物は火加減の差で味が染み込み方が変わる。弱火でじっくりが基本です。",
  "味の階層を作る（下味、調理中の味付け、仕上げの味付け）を意識すると深みが出る。",
  "調理プロセスを動画で撮ると後で見返して改善点が見つかりやすい。",
  "油の使い回しは香りが移るので用途ごとに分けると風味が安定する。",
  "材料を常温に戻すことで加熱ムラが減り火の通りが均一になります。",
  "調理中は手元にいつでも拭ける布巾を用意しておくと動作が滑らかになる。",
  "味見は冷たい状態でも必ずチェック。冷めると味が変わることを忘れない。",
  "塩は少量ずつ足すことで素材の甘みや旨味が引き出せます。",
  "料理のペース配分を身につけるためにタイマーで各工程を計測してみる。",
  "前日に下ごしらえしておくと当日の調理がぐっと楽になる。",
  "量を倍にする時は調味料を単純に倍にしないで味を確認しながら調整する。",
  "食材を叩く・伸ばすなど物理的な処理で柔らかさや味の染み込みを改善できる。",
  "焦げつきを防ぐために鍋底に食材がくっつかないように火力と油を調整する。",
  "酸味や塩味が強いときはジャガイモやパンで吸わせる応急処置が有効。",
  "火力が強すぎると素材の水分が飛びすぎるので、中火で様子を見る習慣を。",
  "調理中に香りを確認して次に何を足すか即決できる訓練をする。",
  "出汁の取り方を変えるだけで和食の印象が大きく変わるので複数方法を試す。",
  "冷凍保存するときは小分けにして再加熱しやすくしておくと便利。",
  "魚や肉の下味に少しの砂糖を入れると焼き色と旨味が良くなることがある。",
  "食感を意識して材料を混ぜすぎないようにする（例：パン生地、卵料理）。",
  "だし殻や野菜くずを使ってストックを作るとコストパフォーマンスが向上する。",
  "季節ごとの献立を考えておくと買い物が効率良くなる。",
  "フライ返しやトングなど道具を使いこなすと仕上がりが格段に安定する。",
  "火を使う料理は換気に注意。安全かつ快適に調理するための習慣をつける。",
  "食材の色味を考えて盛り付けると皿の見栄えがよくなる。",
  "酸化しやすい食材は調理直前に切るのが鮮度を保つコツです。",
  "冷蔵庫の温度管理を適切にして食材の品質を長く保つ。",
  "料理の写真を撮ると客観的に評価でき改善点が見える。",
  "味がぼやけると感じたら塩と酸味で輪郭を出してみる。",
  "シンプルなスープで素材の味を引き出す練習をすると出汁の力が分かる。",
  "旨味を重ねる（昆布＋鰹節など）と簡単に深みが出る。",
  "油の種類で仕上がりが変わる。香りの良い油は最後に少量使うと効果的。",
  "焦げた部分は取り除くと苦味を抑えられる場合がある。",
  "味噌や醤油は火を通しすぎると風味が飛ぶので投入のタイミングに注意。",
  "旬の香草を活用すると少量で料理を華やかにできる。",
  "料理本の索引や写真を参考にして盛り付けのバリエーションを増やす。",
  "火を使う前に材料の水分を切ることで油はねや煮崩れを防げる。",
  "だしを使い回すと味が濃くなりすぎるので用途ごとに管理する。",
  "柔らかさを出したいときは低温長時間調理を試してみる。",
  "調理前に食材の硬さや大きさを揃えると火の通りが均一になる。",
  "香りが強い調味料は最後に加え風味を生かすようにする。",
  "野菜は色よく仕上げるために茹で時間や湯の温度を守る。",
  "料理の最後にバターを少量加えるとまろやかさとコクが増す。",
  "仕上げに少量のレモン汁を垂らすと味が引き締まる。",
  "塩は鰹節や昆布で作っただし塩を使うと旨味が増す。",
  "砂糖の代わりに蜂蜜を使うと丸みのある甘みになる。",
  "仕上げにごま油を数滴たらすと香ばしさが際立つ。",
  "肉料理にすりおろした玉ねぎを入れると柔らかくなる。",
  "冷凍野菜は熱湯でさっと下茹でしてから使うと食感が良くなる。",
  "余熱で火を通すことを意識して一旦火を止める。",
  "炒め物には最後に水少々を回しかけてふっくらさせる。",
  "煮物に隠し味でしょうゆとみりんを少量混ぜる。",
  "炒め始めに塩を少量振ると野菜の水分が抜けにくい。",
  "揚げ物の衣に炭酸水を使うと軽い仕上がりになる。",
  "肉に砂糖を少し揉み込むと焼き色と旨味が良くなる。",
  "煮込みはアルミホイルで落とし蓋をすると煮崩れしにくい。",
  "パスタの茹で汁をソースに使うと乳化して絡みやすい。",
  "野菜を切る向きを揃えると見た目と火の通りが良くなる。",
  "焼き魚に熱い油をかけると皮がパリッと仕上がる。",
  "刻んだハーブを仕上げに振ると香りが立つ。",
  "バルサミコ酢を少量煮詰めてソースに使うとコクが出る。",
  "魚の皮は塩をして少し置いてから焼くとパリッとする。",
  "ご飯に少量のバターを混ぜると風味が豊かになる。",
  "味噌は加熱を抑え、最後に溶かすように加える。",
  "冷たい材料は温めてから混ぜると味の馴染みが良くなる。",
  "レモンの皮のすりおろしを少量加えると爽やかさが増す。",
  "にんにくは加熱時間で味が変わるので投入タイミングを調整する。",
  "揚げ物は網に置いて油を切るとべたつかない。",
  "野菜の甘みを引き出すために軽く砂糖を振ることがある。",
  "下味に少量の酒を使うと臭みが取れる。",
  "鶏肉は皮側からじっくり焼くと脂の旨味が出る。",
  "煮汁は煮詰めてソースに使うと味がまとまる。",
  "魚介類は塩水に短時間浸すと旨味が戻る場合がある。",
  "パン粉に粉チーズを混ぜると香ばしさが増す。",
  "豆類は一度茹でこぼしてアクを取ると臭みが減る。",
  "炒め物にごまを入れると香ばしさと食感が増す。",
  "フルーツは仕上げに漬けると香りが立ちやすい。",
  "煮込み前に表面を焼き固めると旨味が閉じ込められる。",
  "ドレッシングは食べる直前に和えると野菜がシャキッとする。",
  "魚の切り身は皮目を斜めに切ると縮みにくい。",
  "茹でた野菜は氷水にとって色を鮮やかに保つ。",
  "炒めものは強火で素早く調理すると香りが良く残る。",
  "ソースに少量のバターを加えると艶が出る。",
  "カレーの隠し味にココア少量で深みを出すことがある。",
  "酢は料理の最後に加えると酸味が鮮烈に感じる。",
  "缶詰の調味液は利用して旨味を加えると便利。",
  "卵に少量の牛乳を加えるとふんわり仕上がる。",
  "下茹でした野菜を炒めると甘さが引き立つ。",
  "汁物の味は一度冷まして再加熱すると味が馴染む。",
  "胡椒は仕上げで振ると香りが立つ。",
  "炭火風の香りを付けたい時は少量の燻製塩を使う。",
  "味が薄い時は少量のだし顆粒で補強する。",
  "生姜の絞り汁は魚の臭み消しに効果的。",
  "肉の下味にヨーグルトを使うと柔らかくなる。",
  "余った野菜の皮で出汁を取ると無駄が減る。",
  "炒め物の最後に醤油を鍋肌にかけると香ばしさが出る。",
  "牛乳や生クリームを加える前に温めてから混ぜると分離しにくい。",
  "トマトは火にかける前に塩をふると旨味が引き出される。",
  "魚料理は塩をしてから時間を置くと水分が抜けて味が締まる。",
  "ご飯に昆布を一緒に炊くと旨味が移って美味しくなる。",
  "ソテー時にフライパンに残った旨味はソースに活用する。",
  "揚げ物の衣に粉チーズやカレー粉を混ぜると風味が変わる。",
  "香味野菜は低温からじっくり炒めて甘みを引き出す。",
  "煮物の砂糖は隠し味に少量使うと円やかになる。",
  "蒸し料理はふんわりラップで蒸気を閉じ込めると柔らかくなる。",
  "焼き物に酒を振ると香りが立ちやすい。",
  "シメの塩を少量増やして旨味を締めると最後の印象が良い。",
  "炊飯後に数分蒸らすとご飯がふっくらする。",
  "ソースは乳化させると舌触りが良くなる（良く混ぜる）。",
  "サラダは塩で下味をつけてからドレッシングを和えると味が深まる。",
  "オーブン料理は焼き上がりに数分休ませると落ち着く。",
  "冷凍庫の香り移りを防ぐために密封して保存する。",
  "ピクルス液を少し煮詰めて使うと風味が凝縮する。",
  "飲料用の炭酸水で天ぷら衣を作ると軽い食感になる。",
  "味噌を焼き目のついた食材に塗ると香ばしくなる。",
  "余った出汁は冷凍して保存し、必要時に利用する。",
  "ハーブは葉の部分を最後に入れると香りが活きる。",
  "砂糖を焦がすことでカラメル風味を足してコクを出す。",
  "すりおろした大根を肉と合わせると消化を助ける。",
  "魚を焼く前に少量の酢を塗ると身が締まる場合がある。",
  "焼き野菜は仕上げにオイルを足すと艶が戻る。",
  "漬物の塩分は少し抜いてから料理に使うと味が馴染む。",
  "味の淡いスープは仕上げに旨味の強い油を少量垂らす。",
  "ソテーしたきのこは塩で水分を抜いて香ばしさを出す。",
  "コクを出したい時は少量のナッツペーストを隠し味に使う。",
  "魚は皮に切り込みを入れると縮みを防げる。",
  "トマトソースは一晩置くと味が丸くなる。",
  "塩で下味をした後に短時間置くと素材の旨味が出る。",
  "酸味が強い時は少量のバターで丸みをつける。",
  "炒め物の最後に冷たいバターを混ぜるとソースがまとまる。",
  "蒸し器に香り付けで柑橘の皮を入れて香りを移す。",
  "肉を焼くときは触りすぎないで焼き目を付ける。",
  "スープは一度冷やしてから脂を除くと澄んだ味になる。",
  "余ったソースは製氷皿で冷凍して小分け保存する。",
  "味を重ねるために複数の旨味源を少量ずつ使う。",
  "ドライハーブは加熱時間の長い料理に、フレッシュは仕上げに使う。",
  "ごま油と醤油で作るミニソースは万能調味料になる。",
  "揚げ物のパン粉は乾式と湿式を混ぜると食感が変わる。",
  "肉の休ませ時間を守るとジューシーさが保てる。",
  "薄切り肉は重ねてそっと押して焼くと縮みを抑えられる。",
  "煮物にトマトを少量入れると酸味で味が締まる。",
  "フライパンの残り香はトーストに使うと風味が活きる。",
  "香り付けに焦がしネギ油を少量使うと中華風のアクセントに。",
  "ソースの酸味が強ければ少量の砂糖でバランスを取る。",
  "炭火や燻製の香りは少量の燻製塩で再現できる。"
];

  const btnRandom = document.getElementById('btn-random');
  const btnCopy = document.getElementById('btn-copy');
  const btnSavePng = document.getElementById('btn-png');
  const display = document.getElementById('auto-text');
  const searchForm = document.getElementById('search-form');
  const searchInput = document.getElementById('search-input');

  // 初期表示
  display.textContent = "上のボタンを押すとここに今日の料理が上達する方法を表示";

  btnRandom.addEventListener('click', () => {
    const idx = Math.floor(Math.random() * tips.length);
    display.textContent = tips[idx];
    flashOutline(display);
  });

  btnCopy.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(display.textContent);
      showToast('文章をコピーしました');
    } catch (err) {
      showToast('コピーに失敗しました');
    }
  });

  btnSavePng.addEventListener('click', () => {
    textToPngDownload(display.textContent.trim() || '料理が上達する方法');
  });

  // シェアボタン挙動
  document.getElementById('share-x').addEventListener('click', () => {
    const url = encodeURIComponent(location.href);
    const text = encodeURIComponent(display.textContent);
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
  });

  document.getElementById('share-fb').addEventListener('click', () => {
    const u = encodeURIComponent(location.href);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${u}`, '_blank');
  });

  document.getElementById('share-line').addEventListener('click', () => {
    const text = encodeURIComponent(display.textContent + '\n' + location.href);
    window.open(`https://social-plugins.line.me/lineit/share?text=${text}`, '_blank');
  });

  document.getElementById('share-mail').addEventListener('click', () => {
    const subject = encodeURIComponent('今日の料理が上達する方法');
    const body = encodeURIComponent(display.textContent + '\n\n' + location.href);
    window.location.href = `mailto:?subject=${subject}&body=${body}`;
  });

  // 検索フォームはページ内でキーワードを強調表示（簡易実装）
  searchForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const q = searchInput.value.trim();
    if (!q) {
      showToast('検索キーワードを入力してください');
      return;
    }
    highlightQuery(q);
  });

  // 補助関数
  function flashOutline(el) {
    el.classList.add('flash');
    setTimeout(() => el.classList.remove('flash'), 900);
  }

  function showToast(msg) {
    let t = document.getElementById('toast');
    if (!t) {
      t = document.createElement('div');
      t.id = 'toast';
      document.body.appendChild(t);
    }
    t.textContent = msg;
    t.classList.add('visible');
    setTimeout(() => t.classList.remove('visible'), 2000);
  }

  // テキストをPNG化（キャンバスに描画してダウンロード）
  function textToPngDownload(text) {
    const padding = 40;
    const lines = wrapTextLines(text, 36);
    const fontSize = 34;
    const lineHeight = Math.round(fontSize * 1.4);
    const canvasWidth = Math.max(560, Math.min(window.innerWidth - 40, 1400));
    const canvasHeight = padding * 2 + lines.length * lineHeight;
    const canvas = document.createElement('canvas');
    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    const ctx = canvas.getContext('2d');

    // 背景（かわいいパステルグラデ）
    const g = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    g.addColorStop(0, '#fff7fb');
    g.addColorStop(1, '#f0fff7');
    ctx.fillStyle = g;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // テキストスタイル
    ctx.fillStyle = '#222';
    ctx.font = `700 ${fontSize}px "Poppins", "Noto Sans JP", sans-serif`;
    ctx.textBaseline = 'top';
    ctx.textAlign = 'left';

    let x = padding;
    let y = padding;
    for (const line of lines) {
      ctx.fillText(line, x, y);
      y += lineHeight;
    }

    canvas.toBlob(function (blob) {
      const a = document.createElement('a');
      a.download = 'today_cooking_tip.png';
      a.href = URL.createObjectURL(blob);
      document.body.appendChild(a);
      a.click();
      URL.revokeObjectURL(a.href);
      a.remove();
      showToast('PNGを保存しました');
    }, 'image/png');
  }

  // 単純な折返し
  function wrapTextLines(text, maxChars) {
    const words = text.split(/\s+/);
    const lines = [];
    let line = '';
    for (const w of words) {
      if ((line + ' ' + w).trim().length > maxChars) {
        if (line) lines.push(line.trim());
        line = w;
      } else {
        line = (line + ' ' + w).trim();
      }
    }
    if (line) lines.push(line);
    return lines.length ? lines : [text];
  }

  // 簡易検索ハイライト（ページ内のSEOテキスト部分）
  function highlightQuery(q) {
    const container = document.getElementById('seo-content');
    const text = container.getAttribute('data-full');
    if (!text) return;
    const safeQ = q.replace(/[-/\\^$*+?.()|[\]{}]/g, '\\$&');
    const re = new RegExp(`(${safeQ})`, 'ig');
    const highlighted = text.replace(re, '<mark>$1</mark>');
    container.innerHTML = highlighted;
    container.scrollIntoView({ behavior: 'smooth' });
  }

  // 初期でSEOコンテンツを埋める data-full 属性を保持
  (function initSeoContent() {
    const c = document.getElementById('seo-content');
    const full = [
      "料理が上達する方法：本サイトは初心者から中級者までを対象に、腕を上げるための実践的なコツと段取り、道具の選び方、味付けの基本を分かりやすく解説します。",
      "基礎技術の習得：包丁の持ち方、切り方、火加減の使い分け、下ごしらえの重要性についての具体的な練習法を紹介します。",
      "調味と味見のテクニック：塩・砂糖・酸味・旨味のバランスの取り方や、調味料を加える順番、味を安定させるコツをわかりやすく説明します。",
      "調理器具と材料の選び方：フライパンや鍋、包丁、計量器具などの選び方と手入れ方法、調味料や油の違いが与える影響について解説します。",
      "段取り力を高める：作業を効率化するための下ごしらえのタイミング、調理の順序、同時調理のコツを学んで時間あたりの品質を上げます。",
      "味の記録と改善：同じ料理を繰り返し作り、味や工程の違いを記録して改良するやり方を提案します。失敗から学ぶためのチェックポイントも掲載します。",
      "レシピの理解と応用：レシピをそのままなぞるだけでなく、工程の目的を理解して応用する方法を紹介し、家庭の食材でアレンジするコツを教えます。",
      "安全と衛生：食材の保存方法や火の扱い、生食材の取り扱いなど、安全に料理をするための基本的な注意事項をまとめています。",
      "味覚を育てる習慣：自宅での味見の習慣や、プロの味に近づけるための試食法、調味料の違いを意識する練習法を紹介しています。",
      "応用テクニック：香り付け、仕上げ、盛り付け、食感の調整など、見た目と味を同時に改善する応用テクニックを段階別に掲載します。"
    ].join("\n\n");
    c.setAttribute('data-full', full);
    c.innerHTML = full.replace(/\n\n/g, '<p></p>');
  })();

});