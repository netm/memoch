:root{
  --bg:#ffffff;
  --text:#222;
  --link:#0a63d8;
  --accent1:#ff6b6b;
  --accent2:#6bc1ff;
  --accent3:#ffd86b;
  --accent4:#8d6bff;
  --button-text:#fff;
  --card-bg:#f8f9fb;
  --max-width:980px;
  font-family: "Hiragino Kaku Gothic Pro","Noto Sans JP",system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  padding:24px 12px;
  display:flex;
  justify-content:center;
}
.container{
  width:100%;
  max-width:var(--max-width);
  background:linear-gradient(180deg, #ffffff, #fcfcff);
  border-radius:12px;
  padding:20px;
  box-shadow:0 6px 20px rgba(20,30,60,0.08);
}
header h1{
  margin:0 0 6px 0;
  font-size:1.8rem;
  color:var(--accent4);
}
header p.lead{
  margin:0 0 14px 0;
  color:#556;
  font-size:0.98rem;
}
.quiz {
  display:flex;
  flex-direction:column;
  gap:14px;
  align-items:stretch;
  margin-bottom:18px;
}
.card {
  background:var(--card-bg);
  padding:16px;
  border-radius:10px;
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
}
.q-kanji {
  font-size:2.8rem;
  font-weight:700;
  letter-spacing:0.02em;
  flex:1 1 auto;
  text-align:center;
  color:#213049;
}
.q-input-wrap{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:center;
  flex:1 1 320px;
}
input#q-input{
  width:100%;
  max-width:420px;
  padding:12px 14px;
  border-radius:10px;
  border:2px solid #d7dff0;
  font-size:1.05rem;
  outline:none;
  background:white;
  box-shadow:inset 0 1px 0 rgba(0,0,0,0.02);
}
input#q-input:focus{
  border-color:var(--accent2);
  box-shadow:0 6px 18px rgba(107,193,255,0.12);
}
.controls{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
button.btn{
  border:0;
  padding:10px 14px;
  border-radius:10px;
  color:var(--button-text);
  cursor:pointer;
  font-weight:700;
  font-size:0.95rem;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
}
#next-btn{ background:var(--accent1); }
button.share-native{ background:var(--accent2); color:#063047; }
button.share-twitter{ background:#1da1f2; }
button.share-copy{ background:#6c757d; }
#result-message{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%) scale(0.9);
  z-index:9999;
  pointer-events:none;
  transition:transform 220ms ease, opacity 220ms ease;
  opacity:0;
  font-weight:900;
  font-size:2.6rem;
  line-height:1;
  padding:0;
  margin:0;
  min-height:0;
  display:flex;
  align-items:center;
  justify-content:center;
  width:auto;
}
#result-message.visible{ opacity:1; }
#result-message.correct{
  background: linear-gradient(90deg, #28c76f, #12b886);
  color: #fff;
  padding:18px 28px;
  border-radius:14px;
  box-shadow: 0 18px 40px rgba(18, 184, 134, 0.18), 0 6px 18px rgba(0,0,0,0.06);
  font-size:2.6rem;
  transform: translate(-50%, -50%) scale(1);
  opacity:1;
  animation: popCorrect 1s ease forwards;
  letter-spacing:0.02em;
}
#result-message.wrong{
  background: linear-gradient(90deg,#ff6b6b,#ff8a6b);
  color:#fff;
  padding:12px 18px;
  border-radius:10px;
  font-size:2.1rem;
  transform: translate(-50%,-50%) scale(0.95);
  opacity:1;
}
@keyframes popCorrect {
  0% { transform: translate(-50%, -50%) scale(0.6); filter:blur(2px); opacity:0; }
  30% { transform: translate(-50%, -50%) scale(1.08); filter:blur(0); opacity:1; }
  60% { transform: translate(-50%, -50%) scale(0.98); }
  100% { transform: translate(-50%, -50%) scale(1); }
}
.meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-top:8px;
  color:#425;
}
.progress{ font-weight:700; color:#334; }
.article{
  margin-top:18px;
  padding:16px;
  background:#ffffff;
  border-radius:10px;
  line-height:1.8;
  color:#213049;
}
.article h2{ color:var(--accent4); margin-top:0; }
.article h3{ color:var(--accent2); }
a{ color:var(--link); text-decoration:underline; }
.links{ display:flex; flex-direction:column; gap:8px; margin-top:14px; }
.footer-links{ display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }
@media (min-width:780px){
  .quiz { flex-direction:row; align-items:center; }
  .card{ flex-direction:row; }
  .q-kanji{ font-size:3.6rem; text-align:left; }
  .q-input-wrap{ justify-content:flex-end; }
}
@media (orientation:landscape) and (max-width:900px){
  body{ padding:8px; }
  .container{ padding:12px; border-radius:6px; max-width:100%; box-shadow:none; }
  .card{ padding:12px; }
  header h1{ font-size:1.4rem; }
}
button:focus, input:focus, a:focus{
  outline:3px solid rgba(10,99,216,0.16);
  outline-offset:2px;
}